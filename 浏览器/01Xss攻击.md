# 1XSS攻击

简介： 

xss跨站脚本攻击，是一种脚本注入攻击。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本获取用户的cookie，sessionId,进而危害数据安全。

xss的本质是恶意代码未经过滤，和正常代码一起，浏览器无法分辨哪些是恶意代码导致恶意代码被执行。由于这些代码在用户终端执行，所以能获取到用户信息。恶意代码利用获取到的用户信息可以冒充用户完成相应的操作。



# 2.xss常见的注入方法。



在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。

在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。

在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。

在标签的 href、src 等属性中，包含 `javascript:` 等可执行代码。

在 onload、onerror、onclick 等事件中，注入不受控制代码。

在 style 属性和标签中，包含类似 `background-image:url("javascript:...");` 的代码（新版本浏览器已经可以防范）。

在 style 属性和标签中，包含类似 `expression(...)` 的 CSS 表达式代码（新版本浏览器已经可以防范）。





# 3xss的分类



## 1.存储型xss攻击

​    攻击者通过将恶意代码插入网站主机的数据库中，当用户访问网站时，网站从数据库查询到恶意代码拼接成html返回给浏览器。浏览器解析执行后恶意代码能获取用户的信息。冒充用户发送信息攻击网站。 这种攻击常见于用户有保存数据到网站的数据库，库如商品评论等。



## 2反射型xss攻击

 攻击者构造出特殊的url，内含恶意代码。用户打开url，网站服务端将恶意代码从url中取出，拼接到html返回给浏览器。浏览器接收到后解析执行同时恶意代码也被执行。



## 3Dom型xss攻击

攻击者构造出特殊的 URL，其中包含恶意代码。用户打开url,用户浏览器接收到响应后解析执行，前端js取出url中的恶意代码并执行。恶意代码冒充用户访问网站。



# 4xss攻击的预防

## 1.预防用户输入恶意代码。

输入过滤



## 2.防范浏览器执行恶意代码。

### 1.防止html出现注入

 1.改为纯前端渲染，把代码和数据分开

 2.对html做充分的转义。

### 2防止javaScript执行时，执行恶意代码

 在使用 .innerHTML .outerHTML document.write()要小时不要将恶意代码插入其中。

