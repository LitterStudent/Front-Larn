<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    // 打平对象
    let res = {}
    function flat(preStr = '',obj){
      let keys = Object.keys(obj);
      preStr = preStr === '' ? preStr:preStr+'.'
      keys.forEach((key,index)=>{
        if(typeof obj[key] ==='object' && obj[key]!==null){
          flat(preStr+key,obj[key])
        }
        else{
          res[preStr+key] = obj[key]; 
        }
      })
    }

    const obj = {
    a: {
            b: 1,
            c: 2,
            d: {e: 5}
        },
    b: [1, 3, {a: 2, b: 3}],
    c: 3
    }

    flat('',obj);
    console.log(res);

    // 打平数组
    let res2 = [];
    function flatArr(arr){
      arr.forEach((v)=>{
        if(Array.isArray(v)){
          flatArr(v)
        }
        else{
          res2.push(v)
        }
      })
    }

    flatArr([1, 2, [1, [2, 3, [4, 5, [6]]]]])
    console.log(res2);
    // 迭代的方法
    function flatArr2 (arr){
      if(!Array.isArray(arr)){
        return;
      }
      while(arr.some(item=>Array.isArray(item))){
        arr = [].concat(...arr)
      }
      return arr;
    }
    let array = [1, 2, [1, [2, 3, [4, 5, [6]]]]];
    console.log(flatArr2(array));
    
</script>
</html>